# ðŸŒ¸ Iris Flower Classification - Flask ML App

A simple Flask web application with a machine learning model that predicts iris flower species. Built for learning GitHub Actions CI/CD deployment to Azure App Service.

**Live Demo**: [https://flowerapp.azurewebsites.net](https://flowerapp.azurewebsites.net)

## Features

- **Web Interface**: Beautiful UI to input flower measurements and get predictions
- **ML Model**: Pre-trained Random Forest classifier
- **REST API**: JSON endpoints for programmatic access
- **Health Check**: Built-in endpoint for Azure monitoring
- **Auto-Deploy**: GitHub Actions workflow for CI/CD to Azure

## Project Structure

```
â”œâ”€â”€ app.py                 # Main Flask application
â”œâ”€â”€ train_model.py         # Script to train and save the model
â”œâ”€â”€ requirements.txt       # Python dependencies
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.html        # Home page with prediction form
â”‚   â””â”€â”€ result.html       # Prediction results page
â”œâ”€â”€ data/
â”‚   â””â”€â”€ iris.csv          # Dataset (generated by train_model.py)
â”œâ”€â”€ model/
â”‚   â””â”€â”€ model.pkl         # Trained model (generated by train_model.py)
â””â”€â”€ .github/workflows/
    â””â”€â”€ main_flowerapp.yml # Azure deployment workflow
```

## Local Development

### 1. Install Dependencies

```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### 2. Train the Model

```bash
python train_model.py
```

### 3. Run the App

```bash
python app.py
```

Visit `http://localhost:5002`

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Web interface for predictions |
| `/predict` | POST | Make prediction (form or JSON) |
| `/api` | GET | API information |
| `/info` | GET | Dataset information |
| `/health` | GET | Health check |

### Example API Request

```bash
curl -X POST https://flowerapp.azurewebsites.net/predict \
  -H "Content-Type: application/json" \
  -d '{"sepal_length": 5.1, "sepal_width": 3.5, "petal_length": 1.4, "petal_width": 0.2}'
```

## Deployment

This app auto-deploys to Azure App Service via GitHub Actions when you push to `main`.

### How it works:
1. Push to `main` branch
2. GitHub Actions runs the workflow
3. Installs dependencies & trains the model
4. Deploys to Azure App Service

## Sample Predictions

| Species | Sepal Length | Sepal Width | Petal Length | Petal Width |
|---------|--------------|-------------|--------------|-------------|
| Setosa | 5.1 | 3.5 | 1.4 | 0.2 |
| Versicolor | 7.0 | 3.2 | 4.7 | 1.4 |
| Virginica | 6.3 | 3.3 | 6.0 | 2.5 |
